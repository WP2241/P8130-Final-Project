---
title: "FinalProject"
author: "Hyewon Choi"
date: "12/8/2017"
output: html_document
---

```{r first}
library(readr)
library(readxl)
library(janitor)
library(tidyverse)
hos = read_excel("./data/GHProject_Dataset.xlsx") 

hos <- hos %>% 
  clean_names() %>% 
  select(patientid, visitid, admitdtm, losdays2, is30dayreadmit, mews, cindex, evisit, icu_flag, ageyear, gender, race, religion, maritalstatus, insurancetype, bmi:bpdiastolic)
  

unique_visit <- hos %>% 
  group_by(patientid) %>% 
  distinct(patientid)


           
```

```{r second}
hos %>%
  ggplot(aes(x = losdays2)) + 
    geom_histogram()

y = log(hos$losdays2)

hos$gender = ifelse(hos$gender == "Male", 1, ifelse(hos$gender == "Female", 0, NA))

hos$race = ifelse(hos$race == "White", 0, ifelse(hos$race == "African Amer/Black", 1, ifelse(hos$race == "Asian", 2, ifelse(hos$race == "Native Amer/Alaskan", 3, ifelse(hos$race == "Natv Hawaii/Pacf Isl", 4, ifelse(hos$race == "Other/Multiracial", 5, NA))))))

hos$insurancetype = ifelse(hos$insurancetype == "Medicare", 0, ifelse(hos$insurancetype == "Medicaid", 1, ifelse(hos$insurancetype == "Private", 2, ifelse(hos$insurancetype == "NA", 3, NA))))
```

